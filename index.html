<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>AmitTG Tool</title>
  <style>
    * { box-sizing: border-box; }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0f0f0f, #1a1a1a);
      color: #eee;
      margin: 0;
      padding: 20px;
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
      font-weight: 600;
      color: #00faff;
    }

    .button-bar {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    button {
      background: #222;
      border: 1px solid #444;
      color: #00faff;
      padding: 10px 18px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #00faff;
      color: black;
    }

    textarea, input {
      width: 100%;
      padding: 10px;
      background: #1e1e1e;
      border: 1px solid #444;
      color: #fff;
      border-radius: 6px;
      margin-bottom: 10px;
      font-family: monospace;
    }

    .card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid #333;
      border-radius: 12px;
      padding: 20px;
      backdrop-filter: blur(10px);
      box-shadow: 0 0 10px #000;
    }

    pre {
      background: #111;
      border-radius: 6px;
      padding: 12px;
      white-space: pre-wrap;
      border: 1px solid #333;
      font-family: monospace;
      font-size: 14px;
    }

    .copy-btn {
      background: #00aa55;
      color: white;
      margin-top: 10px;
      font-weight: bold;
    }

    #toast {
      position: fixed;
      bottom: -50px;
      left: 50%;
      transform: translateX(-50%);
      background: #00cc66;
      color: #fff;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: bold;
      opacity: 0;
      transition: all 0.4s ease;
      z-index: 9999;
    }

    #toast.show {
      bottom: 30px;
      opacity: 1;
    }
  </style>
</head>
<body>

<h2>✨ AmitTG Premium Tool</h2>

<div class="button-bar">
  <button onclick="startList()">📋 List</button>
  <button onclick="showList()">👀 Show</button>
  <button onclick="monoMode()">🔤 Mono</button>
  <button onclick="insertMode()">➕ Insert</button>
  <button onclick="resetList()">🔄 Reset</button>
</div>

<div id="section" class="card"></div>
<div id="toast">✅ List Copied</div>

<script>
let userData = JSON.parse(localStorage.getItem("amit_data") || `{"list":[],"date":"","next":0}`);

function save() {
  localStorage.setItem("amit_data", JSON.stringify(userData));
}

function toast(msg) {
  const t = document.getElementById('toast');
  t.innerText = msg;
  t.classList.add("show");
  setTimeout(() => t.classList.remove("show"), 2000);
}

function startList() {
  document.getElementById('section').innerHTML = `
    <p><b>📅 Enter Date:</b></p>
    <input id="dateInput" placeholder="e.g., 25 June" />
    <p><b>📋 Paste Your List:</b></p>
    <textarea id="listInput" rows="8" placeholder="1. 2400 5\n2. Del\n3. 3300 4"></textarea>
    <button onclick="saveList()">✅ Save List</button>
  `;
}

function saveList() {
  const date = document.getElementById('dateInput').value.trim();
  const lines = document.getElementById('listInput').value.trim().split('\n');
  const cleaned = [];

  for (let line of lines) {
    line = line.trim();
    if (!line) continue;
    const parts = line.split(/\s+/);
    const serial = parseInt(parts[0].replace(".", ""));
    if (line.toLowerCase().includes("del")) {
      cleaned.push({ serial, value: "deleted" });
    } else {
      cleaned.push({ serial, value: parts[parts.length - 1] });
    }
  }

  userData = { list: cleaned, date: date, next: 0 };
  save();
  toast("✅ List Saved");
  insertMode();
}

function insertMode() {
  document.getElementById('section').innerHTML = `
    <p><b>➕ Enter Code + Amount (e.g., ABC123456 2300):</b></p>
    <input id="codeInput" placeholder="e.g., ABC123456 2300" />
    <button onclick="insertCode()">💾 Insert</button>
  `;
}

function insertCode() {
  const val = document.getElementById('codeInput').value.trim();
  const parts = val.split(/\s+/);
  if (parts.length !== 2 || parts[0].length !== 9 || isNaN(parts[1])) {
    toast("❌ Format: ABC123456 2300");
    return;
  }

  const [rawCode, amount] = parts;
  const code = `\`${rawCode}\``;
  let inserted = false;

  for (let i = userData.next; i < userData.list.length; i++) {
    const item = userData.list[i];
    if (item.value !== "deleted" && !item.value.includes(" ")) {
      item.value = `${code}   ${amount}   ${item.value}`;
      userData.next = i + 1;
      inserted = true;
      break;
    }
  }

  if (inserted) {
    save();
    toast("✅ Code Saved");
    insertMode();
  } else {
    toast("⚠️ No space to insert");
  }
}

function showList() {
  if (!userData.list.length) {
    document.getElementById('section').innerHTML = `<p>❌ No list found.</p>`;
    return;
  }

  const date = userData.date;
  let out = `**${date}**\n\n****\n\n`;
  for (let item of userData.list) {
    let val = item.value.replace(/([A-Za-z0-9]{9})/g, '`$1`');
    out += `${item.serial}.   ${val}\n\n`;
  }

  document.getElementById('section').innerHTML = `
    <pre id="showOutput">${out}</pre>
    <button class="copy-btn" onclick="copyOutput()">📋 Copy List</button>
  `;
}

function monoMode() {
  document.getElementById('section').innerHTML = `
    <p><b>🔤 Paste your list:</b></p>
    <textarea id="monoInput" rows="8" placeholder="Multiple lines..."></textarea>
    <button onclick="formatMono()">✅ Format</button>
  `;
}

function formatMono() {
  const raw = document.getElementById('monoInput').value.trim();
  const lines = raw.split('\n').filter(l => l.trim());
  const result = lines.map(line =>
    line.replace(/([A-Za-z0-9]{9})/g, '`$1`')
  ).join('\n\n');

  document.getElementById('section').innerHTML = `
    <pre id="showOutput">${result}</pre>
    <button class="copy-btn" onclick="copyOutput()">📋 Copy List</button>
  `;
}

function copyOutput() {
  const text = document.getElementById("showOutput").innerText;
  navigator.clipboard.writeText(text).then(() => {
    toast("✅ List Copied");
  });
}

function resetList() {
  if (confirm("❓ Reset all data?")) {
    userData = { list: [], date: "", next: 0 };
    save();
    document.getElementById('section').innerHTML = `<p>✅ List reset done.</p>`;
  }
}
</script>

</body>
</html>
